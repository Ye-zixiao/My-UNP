#### 性能测试

大致测算下来，客户端5个进程，每个进程5000个连接请求，共计250000个连接请求。这些时间也仅仅是粗略的测量，仅供参考。

##### 1. 对于临时创建子进程/工作线程的并发服务器

| （临时创建）服务器策略 | 用户时间(s) | 系统时间(s) |
| :--------------------: | :---------: | :---------: |
|   临时创建工作子进程   |   6.80441   |   7.09226   |
|   临时创建工作子线程   |   1.01152   |   3.47266   |



##### 2. 对于预设进程/线程池的并发服务器

服务器要么是预派生4个子进程，要么是预创建4个工作线程。各个并发服务器的用户时间和客户时间如下：

|                （预设进程/线程池）服务器策略                 | 用户时间(s) | 系统时间(s) |
| :----------------------------------------------------------: | :---------: | :---------: |
|                多进程并发，子进程accept不上锁                |  0.312021   |   1.2351    |
|            多进程并发，子进程accept使用文件锁上锁            |  0.368596   |   1.27033   |
|       多进程并发，子进程accept使用进程共享的互斥量上锁       |  0.337457   |   1.23994   |
|         多进程并发，父进程accept后描述符传递给子进程         |  0.838291   |   2.99213   |
|         多线程并发，非主线程各自accept使用互斥量上锁         |  0.369193   |   1.25836   |
|       多线程并发，非主线程各自accept但不使用互斥量上锁       |  0.373247   |   1.25158   |
| 多线程并发，主线程accept通过队列传递给工作线程，使用互斥量保护队列 |  0.634449   |   1.97519   |

