#### 性能测试

大致测算下来，客户端5个进程，每个进程5000个连接请求，共计250000个连接请求。这些时间也仅仅是粗略的测量，仅供参考。

##### 1. 对于临时创建子进程/工作线程的并发服务器

| （临时创建）服务器策略 | 用户时间(s) | 系统时间(s) |
| :--------------------: | :---------: | :---------: |
|   临时创建工作子进程   |   6.68311   |   6.82498   |
|   临时创建工作子线程   |   1.01009   |   3.74278   |



##### 2. 对于预设进程/线程池的并发服务器

服务器要么是预派生4个子进程，要么是预创建4个工作线程。各个并发服务器的用户时间和客户时间如下：

|                （预设进程/线程池）服务器策略                 | 用户时间(s) | 系统时间(s) |
| :----------------------------------------------------------: | :---------: | :---------: |
|                多进程并发，子进程accept不上锁                |  0.294173   |   1.04427   |
|            多进程并发，子进程accept使用文件锁上锁            |  0.311205   |   1.15848   |
|       多进程并发，子进程accept使用进程共享的互斥量上锁       |  0.308511   |   1.05104   |
|         多进程并发，父进程accept后描述符传递给子进程         |  0.703181   |   2.73328   |
|           多线程并发，非主线程accept使用互斥量上锁           |  0.296476   |   1.15365   |
| 多线程并发，主线程accept通过队列传递给工作线程，使用互斥量保护队列 |  0.376243   |   1.06855   |

